const t=document.querySelector("#canvas"),n=t.getContext("2d"),i=document.querySelector(".ui__bar"),r=document.querySelector(".cursor");t.width=window.innerWidth,t.height=window.innerHeight-i.clientHeight;let o={w:t.width,h:t.height,pi:Math.PI,replayInterval:10,radius:6,color:"#000000",isMouseDown:!1,coords:[]};const c=new function(){function c(){o.color=JSON.parse(localStorage.getItem("picture"))[0],o.radius=JSON.parse(localStorage.getItem("picture"))[1],o.coords=JSON.parse(localStorage.getItem("picture"))[2];let t=setInterval((()=>{if(!o.coords.length)return clearInterval(t),void n.beginPath();let i=o.coords.shift();e={clientX:i[0],clientY:i[1]},n.lineTo(e.clientX,e.clientY),n.stroke(),n.beginPath(),n.arc(e.clientX,e.clientY,o.radius,0,2*o.pi),n.fill(),n.beginPath(),n.moveTo(e.clientX,e.clientY)}),o.replayInterval)}function l(){n.fillStyle="#ffffff",n.fillRect(0,0,o.w,o.h),n.beginPath(),n.fillStyle=o.color}return document.addEventListener("keydown",(e=>{switch(e.code){case"KeyS":case"KeyЫ":localStorage.setItem("picture",JSON.stringify([o.color,o.radius,o.coords]));break;case"KeyR":case"KeyК":l(),c();break;case"KeyC":case"KeyС":l()}})),i.addEventListener("input",(function(e){switch(e.target.type){case"range":case"number":!function(t){o.radius=e.target.value/2,e.target==t.querySelector('input[type="range"]')&&(t.querySelector('input[type="number"]').value=t.querySelector('input[type="range"]').value);e.target==t.querySelector('input[type="number"]')&&(t.querySelector('input[type="range"]').value=t.querySelector('input[type="number"]').value)}(this);break;case"color":o.color=e.target.value,document.documentElement.style.setProperty("--fill-clr",o.color)}})),t.addEventListener("mousedown",(e=>{o.isMouseDown=!0})),t.addEventListener("mouseup",(e=>{o.isMouseDown=!1,n.beginPath(),o.coords.push("mouseup")})),t.addEventListener("mousemove",(e=>{r.style.transform=`translate3d(calc(${e.clientX}px), calc(${e.clientY}px - 100%), 0)`,o.isMouseDown&&(o.coords.push([e.clientX,e.clientY]),n.fillStyle=o.color,n.strokeStyle=o.color,n.lineWidth=2*o.radius,n.lineTo(e.clientX,e.clientY),n.stroke(),n.beginPath(),n.arc(e.clientX,e.clientY,o.radius,0,2*o.pi),n.fill(),n.beginPath(),n.moveTo(e.clientX,e.clientY))})),{update(){t.width=window.innerWidth,t.height=window.innerHeight-i.clientHeight}}},l=document.querySelector(".info"),a=document.querySelector(".info__bar");function s(e,t){e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)}window.addEventListener("resize",(function(){c.update()})),l.addEventListener("mouseover",(()=>s(a,"_isActive"))),l.addEventListener("mouseout",(()=>s(a,"_isActive")));